# Система емержентної поведінки привидів для Пакмен

## Огляд системи

Реалізована система штучного інтелекту для привидів, яка використовує прості правила для створення складної емержентної поведінки. Кожен привид має обмежене сприйняття та прості правила поведінки, але разом вони створюють складні колективні стратегії для полювання на гравця.

## Основні принципи

### 1. Обмежене спостереження
- **Лабіринт**: Привиди бачать лише на обмежену відстань (3-7 клітинок залежно від складності)
- **Інші привиди**: Обмежена дистанція бачення інших привидів (2-6 клітинок)
- **Гравець**: Змінна дистанція виявлення гравця (4-8 клітинок)

### 2. Обмежена комунікація
- Привиди можуть ділитися інформацією про останню відому позицію гравця
- Інформація має термін дії (застаріває через 5-10 тактів)
- Немає прямого доступу до "думок" інших привидів

### 3. Прості правила поведінки
Кожен привид має 4 основні типи поведінки:

#### Патрулювання (Patrol)
- Рух по випадково згенерованому маршруту
- Зміна маршруту при застряганні
- Базова поведінка для контролю території

#### Полювання (Hunt)
- Активується при виявленні гравця
- Використовує як пряме бачення, так і інформацію від інших привидів
- Має кулдаун для уникнення постійного переслідування

#### Блокування (Block)
- Займання стратегічних позицій (перехрестя, вузькі проходи)
- Кооперативна поведінка з іншими привидами
- Тимчасова поведінка з лімітом часу

#### Випадковий рух (Random)
- Базова поведінка за замовчуванням
- Уникнення повернення назад
- Забезпечує непередбачуваність

## Рівні складності

### Легкий (Easy)
- **Активні поведінки**: Патрулювання, Випадковий рух
- **Бачення лабіринту**: 3 клітинки
- **Бачення привидів**: 2 клітинки  
- **Бачення гравця**: 4 клітинки
- **Кооперація**: 10%

### Середній (Medium)
- **Активні поведінки**: Патрулювання, Полювання, Випадковий рух
- **Бачення лабіринту**: 5 клітинок
- **Бачення привидів**: 4 клітинки
- **Бачення гравця**: 6 клітинок
- **Кооперація**: 30%

### Важкий (Hard)
- **Активні поведінки**: Всі типи поведінки
- **Бачення лабіринту**: 7 клітинок
- **Бачення привидів**: 6 клітинок
- **Бачення гравця**: 8 клітинок
- **Кооперація**: 60%

## Емержентна поведінка

### Що виникає природно:
1. **Координовані атаки**: Привиди несвідомо оточують гравця
2. **Територіальний контроль**: Різні привиди контролюють різні зони
3. **Адаптивна стратегія**: Поведінка змінюється залежно від дій гравця
4. **Колективна пам'ять**: Інформація поширюється між привидами

### Складність без "читерства":
- Немає збільшення швидкості
- Немає проходження крізь стіни
- Немає прямого доступу до позиції гравця
- Немає центрального координатора

## Архітектура коду

### Основні класи:
- `Ghost`: Головний клас привида з усією логікою поведінки
- `GhostBehaviorType`: Енум типів поведінки
- `GhostAIConfig`: Конфігурація параметрів для різних рівнів
- `GhostCommunication`: Система обміну інформацією
- `DifficultyScene`: Інтерфейс вибору складності

### Ключові методи:
- `UpdateBehavior()`: Вибір поточної поведінки
- `GetNextDirection()`: Визначення напрямку руху
- `GetDirectPlayerDirection()`: Пошук гравця в прямій видимості
- `GetNearbyGhosts()`: Виявлення сусідніх привидів

## Тестування емержентної поведінки

Для перевірки роботи системи рекомендується:

1. **Легкий рівень**: Привиди повинні патрулювати та рідко координуватися
2. **Середній рівень**: Помітна реакція на гравця, іноді групова поведінка
3. **Важкий рівень**: Активне переслідування, блокування шляхів, координовані атаки

## Можливі розширення

- Додавання різних "особистостей" привидів
- Система навчання на основі поведінки гравця  
- Динамічне регулювання складності
- Більш складні алгоритми комунікації
- Додаткові типи поведінки (засідки, фланговий обхід)
